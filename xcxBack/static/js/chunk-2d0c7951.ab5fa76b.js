(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7951"],{"50dd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hhy-container"},[r("PageWrap",{scopedSlots:e._u([{key:"pageTop",fn:function(){return[r("el-form",{ref:"searchForm",staticClass:"hhy-card hhy-topSearch-box",attrs:{inline:"",model:e.searchForm}},[r("el-form-item",{attrs:{label:"起止时间",prop:"date"}},[r("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),r("el-form-item",{attrs:{label:"单号",prop:"orderNumber"}},[r("el-input",{attrs:{clearable:"",placeholder:"单号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initData(t)}},model:{value:e.searchForm.orderNumber,callback:function(t){e.$set(e.searchForm,"orderNumber",t)},expression:"searchForm.orderNumber"}})],1),r("el-form-item",[r("el-button",{staticClass:"hhy-search-btn",attrs:{type:"primary",round:""},on:{click:e.initData}},[e._v("查询")]),r("el-button",{staticClass:"hhy-reset-btn",attrs:{type:"danger",round:""},on:{click:function(t){return e.resetSearchForm("searchForm")}}},[e._v("重置")])],1)],1)]},proxy:!0},{key:"tableMenuBtn",fn:function(){return[r("div",{staticClass:"tableMenuBtn"},[r("el-tabs",{on:{"tab-click":e.handleMenuClick},model:{value:e.activeMenuName,callback:function(t){e.activeMenuName=t},expression:"activeMenuName"}},[r("el-tab-pane",{attrs:{label:"待处理",name:"待处理"}}),r("el-tab-pane",{attrs:{label:"完成",name:"完成"}}),r("el-tab-pane",{attrs:{label:"已取消",name:"已取消"}})],1),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTransfer}},[e._v("发起调拨")])],1)]},proxy:!0},{key:"default",fn:function(t){return[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"hhy-table",attrs:{height:t.contentHeight,data:e.tableDataList,"element-loading-text":"加载中...",stripe:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexMethod}}),r("el-table-column",{attrs:{label:"订单","min-width":"150","show-overflow-tooltip":"",prop:"orderNo"}}),r("el-table-column",{attrs:{label:"发货门店","min-width":"120","show-overflow-tooltip":"",prop:"fhstore"}}),r("el-table-column",{attrs:{label:"收货门店","min-width":"120","show-overflow-tooltip":"",prop:"shstore"}}),r("el-table-column",{attrs:{label:"订单商品","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.openTransferDetail(a)}}},[e._v("共"+e._s(a.optionNum)+"项")]),e._v(" "),r("el-tag",{attrs:{type:e._f("statusFilter")(a.status)}},[e._v(e._s(a.status))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"订单状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tag",{attrs:{effect:"dark",type:e._f("orderStatusFilter")(a.orderStatus)}},[e._v(e._s(a.orderStatus))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"订单金额","min-width":"120",prop:"amount"}}),r("el-table-column",{attrs:{label:"发货次数","min-width":"120",prop:"sendCount"}}),r("el-table-column",{attrs:{label:"创建时间","min-width":"150",prop:"createDate"}}),r("el-table-column",{attrs:{label:"操作",width:"260",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return"待处理"==e.activeMenuName?[r("el-button",{attrs:{icon:"el-icon-shopping-cart-full",type:"primary"},on:{click:function(t){return e.storeFH(a)}}},[e._v("本店发货")]),r("el-button",{attrs:{icon:"el-icon-close",type:"danger"},on:{click:function(t){return e.removeOrder(a)}}},[e._v("取消订单")])]:void 0}}],null,!0)})],1)]}},{key:"tablePagination",fn:function(){return[r("myPagination",{attrs:{pager:e.pager},on:{query:e.initData}})]},proxy:!0}])}),r("el-dialog",{attrs:{title:"查看调拨单",top:"8vh",visible:e.searchTransferOrderDialog.visible,width:"65%"},on:{"update:visible":function(t){return e.$set(e.searchTransferOrderDialog,"visible",t)},closed:e.closeSearchTransferOrderDialog}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.searchTransferOrderDialog.tableLoading,expression:"searchTransferOrderDialog.tableLoading"}],staticClass:"hhy-table",attrs:{"element-loading-text":"加载中...",height:"400",data:e.searchTransferOrderDialog.tableData,stripe:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),r("el-table-column",{attrs:{label:"采购商品","show-overflow-tooltip":"",prop:"productName"}}),r("el-table-column",{attrs:{label:"规格","show-overflow-tooltip":"",prop:"specifications"}}),r("el-table-column",{attrs:{label:"货号","show-overflow-tooltip":"",prop:"ardNo"}}),r("el-table-column",{attrs:{label:"数量",prop:"number"}}),r("el-table-column",{attrs:{label:"可用库存"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.availableStockList,(function(t,a){return r("el-tag",{key:a,attrs:{type:"success"}},[e._v(e._s(t))])}))}}])}),r("el-table-column",{attrs:{label:"已发货",prop:"shipped"}}),r("el-table-column",{attrs:{label:"还需发货",prop:"needShipped"}})],1)],1),r("el-dialog",{attrs:{title:"调拨单发货",top:"8vh",visible:e.TransferOrderFHDialog.visible,width:"70%"},on:{"update:visible":function(t){return e.$set(e.TransferOrderFHDialog,"visible",t)},closed:e.closeTransferOrderFHDialog}},[r("el-table",{staticClass:"hhy-table",attrs:{data:e.TransferOrderFHDialog.tableData,stripe:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),r("el-table-column",{attrs:{label:"采购商品","show-overflow-tooltip":"",prop:"productName"}}),r("el-table-column",{attrs:{label:"规格","show-overflow-tooltip":"",prop:"specifications"}}),r("el-table-column",{attrs:{label:"货号","show-overflow-tooltip":"",prop:"ardNo"}}),r("el-table-column",{attrs:{label:"采购价",prop:"purchasePrice"}}),r("el-table-column",{attrs:{label:"采购数量",prop:"purchaseNumber"}}),r("el-table-column",{attrs:{label:"可用库存","show-overflow-tooltip":"","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.availableStockList,(function(t,a){return r("el-tag",{key:a,attrs:{type:"success"}},[e._v(e._s(t))])}))}}])}),r("el-table-column",{attrs:{label:"已发货",prop:"shipped"}}),r("el-table-column",{attrs:{label:"剩余",prop:"residue"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tag",{attrs:{type:"danger"}},[e._v(e._s(a.residue))])]}}])}),r("el-table-column",{attrs:{label:"发货数量",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-input",{staticStyle:{width:"90px"},attrs:{maxlength:"5",clearable:"",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:a.fhNumber,callback:function(t){e.$set(a,"fhNumber",t)},expression:"row.fhNumber"}})]}}])})],1),r("el-form",{ref:"fhFormRef",attrs:{model:e.TransferOrderFHDialog.fhForm,inline:!1,rules:e.TransferOrderFHDialog.fhFormRules,"label-width":"100px"}},[r("div",{staticClass:"hhy-tips",staticStyle:{"margin-top":"15px"}},[r("p",[e._v("配送信息")])]),r("el-form-item",{attrs:{label:"发货仓"}},[e._v(" "+e._s(e.TransferOrderFHDialog.fhForm.shippingBin)+" ")]),r("el-form-item",{attrs:{label:"收货人"}},[e._v(" "+e._s(e.TransferOrderFHDialog.fhForm.addressee)+" ")]),r("el-form-item",{attrs:{label:"收货地址"}},[e._v(" "+e._s(e.TransferOrderFHDialog.fhForm.address)+" ")]),r("div",{staticClass:"hhy-tips"},[r("p",[e._v("物流")])]),r("el-form-item",{attrs:{label:"物流公司",prop:"distribution"}},[r("el-select",{attrs:{placeholder:"请选择物流公司",filterable:"",clearable:""},model:{value:e.TransferOrderFHDialog.fhForm.distribution,callback:function(t){e.$set(e.TransferOrderFHDialog.fhForm,"distribution",t)},expression:"TransferOrderFHDialog.fhForm.distribution"}},e._l(e.TransferOrderFHDialog.distributionList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"快递单号",prop:"trackingNumber"}},[r("el-input",{staticStyle:{width:"210px"},attrs:{clearable:"",placeholder:"请输入快递单号"},model:{value:e.TransferOrderFHDialog.fhForm.trackingNumber,callback:function(t){e.$set(e.TransferOrderFHDialog.fhForm,"trackingNumber",t)},expression:"TransferOrderFHDialog.fhForm.trackingNumber"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.TransferOrderFHDialog.visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{loading:e.TransferOrderFHDialog.submitLoading,type:"primary"},on:{click:function(t){return e.handleTransferOrderFH("fhFormRef")}}},[e._v("确 定")])],1)],1)],1)},l=[],o={name:"PurchaseOrder",data:function(){return{searchForm:{date:"",orderNumber:""},activeMenuName:"待处理",tableLoading:!1,tableDataList:[],pager:{count:100,page:1,rows:15,checkNum:0},searchTransferOrderDialog:{visible:!1,tableData:[],tableLoading:!1},TransferOrderFHDialog:{visible:!1,tableData:[],distributionList:[{id:1,name:"京东"},{id:2,name:"顺丰"}],submitLoading:!1,fhForm:{shippingBin:"乔丹品牌",addressee:"张三丰",address:"北京市海淀区上地七街",distribution:"",trackingNumber:""},fhFormRules:{distribution:[{required:!0,message:"请选择物流公司",trigger:"change"}],trackingNumber:[{required:!0,message:"请输入快递单号",trigger:"blur"},{pattern:/\S+/,message:"请输入快递单号",trigger:"blur"}]}}}},filters:{statusFilter:function(e){var t={"已发完":"success","未发货":"danger"};return t[e]},orderStatusFilter:function(e){var t={"处理中":"warning","已完成":"success","已取消":"info"};return t[e]}},created:function(){this.initData()},methods:{resetSearchForm:function(e){this.$refs[e].resetFields()},handleMenuClick:function(e,t){this.tableDataList=[],this.initData()},initData:function(){var e=this;this.tableLoading=!0,setTimeout((function(){var t=[];"待处理"==e.activeMenuName?t=[{id:1,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"未发货",orderStatus:"处理中",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"},{id:2,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"未发货",orderStatus:"处理中",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"},{id:3,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"未发货",orderStatus:"处理中",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"},{id:4,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"未发货",orderStatus:"处理中",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"},{id:5,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"未发货",orderStatus:"处理中",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"}]:"完成"==e.activeMenuName?t=[{id:1,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"已发完",orderStatus:"已完成",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"}]:"已取消"==e.activeMenuName&&(t=[{id:1,orderNo:"00059230701161837",fhstore:"北京店",shstore:"北京店",optionNum:1,status:"已发完",orderStatus:"已取消",amount:"200.00",sendCount:"2次",createDate:"2023-07-01 16:18:37"}]),e.tableDataList=t,e.tableLoading=!1}),500)},indexMethod:function(e){return(this.pager.page-1)*this.pager.rows+e+1},openTransferDetail:function(e){var t=this;this.searchTransferOrderDialog.visible=!0,this.searchTransferOrderDialog.tableLoading=!0,setTimeout((function(){t.searchTransferOrderDialog.tableData=[{id:1,productName:"POLO衫经典款",specifications:"黄色 41",ardNo:"jdk01-01",number:1,availableStockList:["乔丹品牌: 580","南京店: 559"],shipped:1,needShipped:2}],t.searchTransferOrderDialog.tableLoading=!1}),500)},closeSearchTransferOrderDialog:function(){this.searchTransferOrderDialog.tableData=[]},addTransfer:function(){this.$router.push({name:"AddTransferOrder"})},storeFH:function(e){this.TransferOrderFHDialog.visible=!0,this.TransferOrderFHDialog.tableData=[{id:1,productName:"商务衬衫",specifications:"蓝色 41",ardNo:"nb12345",purchasePrice:150,purchaseNumber:2,availableStockList:["乔丹品牌：30"],shipped:0,residue:2,fhNumber:0},{id:2,productName:"商务衬衫",specifications:"蓝色 41",ardNo:"nb12345",purchasePrice:150,purchaseNumber:2,availableStockList:["乔丹品牌：30"],shipped:0,residue:2,fhNumber:0}]},handleTransferOrderFH:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.TransferOrderFHDialog.submitLoading=!0,setTimeout((function(){t.TransferOrderFHDialog.submitLoading=!1,t.TransferOrderFHDialog.visible=!1,t.$message.success("操作成功")}),500)}))},closeTransferOrderFHDialog:function(){this.$refs["fhFormRef"].resetFields()},removeOrder:function(e){var t=this;this.$confirm("确定要取消订单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message.success("取消成功"),t.initData()})).catch((function(){}))}}},s=o,n=r("2877"),i=Object(n["a"])(s,a,l,!1,null,null,null);t["default"]=i.exports}}]);