(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52e6cf25"],{"0b75":function(e,t,i){"use strict";i("15e2")},"13d5":function(e,t,i){"use strict";var r=i("23e7"),n=i("d58f").left,o=i("a640"),a=i("ae40"),s=o("reduce"),l=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!l},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"15e2":function(e,t,i){},"7db0":function(e,t,i){"use strict";var r=i("23e7"),n=i("b727").find,o=i("44d2"),a=i("ae40"),s="find",l=!0,c=a(s);s in[]&&Array(1)[s]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},9927:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hhy-container"},[i("div",{staticClass:"hhy-card product_wrap"},[i("el-form",{ref:"TransferFormRef",attrs:{model:e.TransferForm,inline:!1,rules:e.TransferFormRules,"label-width":"100px"}},[i("div",{staticClass:"hhy-tips"},[i("p",[e._v("发起调拨")])]),i("el-form-item",{attrs:{label:"发货门店",prop:"fhStore"}},[i("el-select",{attrs:{placeholder:"请选择发货门店",filterable:"",clearable:""},model:{value:e.TransferForm.fhStore,callback:function(t){e.$set(e.TransferForm,"fhStore",t)},expression:"TransferForm.fhStore"}},e._l(e.fhStoreList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"收货门店",prop:"shStore"}},[i("el-select",{attrs:{placeholder:"请选择收货门店",filterable:"",clearable:""},model:{value:e.TransferForm.shStore,callback:function(t){e.$set(e.TransferForm,"shStore",t)},expression:"TransferForm.shStore"}},e._l(e.shStoreList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.openclothingDialog}},[e._v("添加成衣")]),i("el-table",{staticClass:"hhy-table",attrs:{height:"300",data:e.TransferForm.clothingDataList,stripe:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),i("el-table-column",{attrs:{label:"成衣","show-overflow-tooltip":"",prop:"title"}}),i("el-table-column",{attrs:{label:"货号","show-overflow-tooltip":"",prop:"artNo"}}),i("el-table-column",{attrs:{label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[i("el-tag",[e._v(e._s(r.specifications))])]}}])}),i("el-table-column",{attrs:{label:"采购价",prop:"purchasePrice"}}),i("el-table-column",{attrs:{label:"库存"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return e._l(r.inventory,(function(t,r){return i("el-tag",{key:r,attrs:{type:"warning"}},[e._v(e._s(t.brand)+"："+e._s(t.num))])}))}}])}),i("el-table-column",{attrs:{label:"购买量",prop:"PurchaseQuantity"}}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"el-icon-setting",type:"primary"},on:{click:function(i){return e.openSetNumberDialog(t.row)}}},[e._v("调整数量")]),i("el-popconfirm",{attrs:{title:"确定要删除吗？"},on:{confirm:function(i){return e.delSelColthing(t.row,t.$index)},onConfirm:function(i){return e.delSelColthing(t.row,t.$index)}}},[i("el-button",{attrs:{slot:"reference",icon:"el-icon-delete",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),i("el-form-item",{staticClass:"footerBtn"},[i("el-button",{on:{click:function(t){return e.resetForm("TransferFormRef")}}},[e._v("重置")]),e.TransferForm.clothingDataList.length>0?i("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitForm("TransferFormRef")}}},[e._v("提交调拨")]):e._e()],1)],1)],1),i("el-dialog",{attrs:{title:"添加成衣",top:"8vh",visible:e.clothingDialog.visible,width:"850px"},on:{"update:visible":function(t){return e.$set(e.clothingDialog,"visible",t)},closed:e.closeClothingDialog}},[i("div",[i("div",{staticClass:"clothingSearch_wrap"},[i("div",[i("el-input",{attrs:{placeholder:"输入货号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getClothingData(t)}},model:{value:e.clothingDialog.gic,callback:function(t){e.$set(e.clothingDialog,"gic",t)},expression:"clothingDialog.gic"}},[i("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.getClothingData},slot:"append"})],1)],1),i("span",[e._v("选中"+e._s(e.currSelNumber)+"件")])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.clothingDialog.loading,expression:"clothingDialog.loading"}],staticClass:"clothingCont_wrap",attrs:{"element-loading-text":"拼命加载中"}},[e._l(e.clothingDialog.dataList,(function(t){return i("div",{key:t.id,staticClass:"item",class:{active:t.isChecked},on:{click:function(e){t.isChecked=!t.isChecked}}},[i("el-image",{attrs:{src:t.imgUrl,fit:"cover"}}),i("div",{staticClass:"text"},[i("p",[e._v(e._s(t.title))]),i("p",[e._v("货号："+e._s(t.artNo))]),i("p",[e._v("规格："),i("el-tag",[e._v(e._s(t.specifications))])],1),i("p",[e._v("库存："+e._s(t.inventory.map((function(e){return e.num})).reduce((function(e,t){return e+t}),0)))])])],1)})),i("i"),i("i"),i("i"),i("i")],2)]),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.clothingDialog.visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:e.submitSelClothingData}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"编辑成衣数量",top:"8vh",visible:e.setNumberDialog.visible,width:"550px"},on:{"update:visible":function(t){return e.$set(e.setNumberDialog,"visible",t)},closed:e.closeSetNumberDialog}},[i("el-form",{ref:"setNumberRef",attrs:{model:e.setNumberDialog.setNumberForm,inline:!1,rules:e.setNumberDialog.Rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"成衣"}},[e._v(" "+e._s(e.setNumberDialog.setNumberForm.name)+" "),i("el-tag",[e._v(" "+e._s(e.setNumberDialog.setNumberForm.color))])],1),i("el-form-item",{attrs:{label:"库存"}},[e._v(" "+e._s(e.setNumberDialog.setNumberForm.inventory)+" ")]),i("el-form-item",{attrs:{label:"数量",prop:"number"}},[i("el-input",{staticStyle:{width:"90px"},attrs:{maxlength:"5",clearable:"",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.setNumberDialog.setNumberForm.number,callback:function(t){e.$set(e.setNumberDialog.setNumberForm,"number",t)},expression:"setNumberDialog.setNumberForm.number"}})],1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.setNumberDialog.visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:function(t){return e.handleSetNumber("setNumberRef")}}},[e._v("确 定")])],1)],1)],1)},n=[],o=(i("4de4"),i("d3b7"),i("159b"),i("b0c0"),i("13d5"),i("d81d"),i("7db0"),i("a434"),{name:"AddTransferOrder",data:function(){return{submitLoading:!1,fhStoreList:[{id:1,name:"北京店"}],shStoreList:[{id:1,name:"南京店"}],TransferForm:{fhStore:"",shStore:"",clothingDataList:[]},TransferFormRules:{fhStore:[{required:!0,message:"请选择发货门店",trigger:"change"}],shStore:[{required:!0,message:"请选择收货门店",trigger:"change"}]},clothingDialog:{visible:!1,gic:"",loading:!1,dataList:[]},setNumberDialog:{visible:!1,setNumberForm:{id:"",name:"",color:"",inventory:"",number:""},Rules:{number:[{required:!0,message:"请输入调整数量",trigger:"blur"}]}}}},computed:{currSelNumber:function(){return this.clothingDialog.dataList.filter((function(e){return e.isChecked})).length}},methods:{openclothingDialog:function(){this.clothingDialog.visible=!0,this.getClothingData()},getClothingData:function(){var e=this;this.clothingDialog.dataList=[],this.clothingDialog.loading=!0,setTimeout((function(){e.clothingDialog.dataList=[{id:1,imgUrl:"https://chenjiedingzhi.oss-cn-shanghai.aliyuncs.com/upload/ginger_image/1/2023_04_21_14_16_07.09604.jpg",isChecked:!1,title:"修身西服2023春季新款修身西服2023春季新款",artNo:"xsxfcjxk",specifications:"黄色 41",purchasePrice:"11.22",inventory:[{brand:"北京店",num:10}],PurchaseQuantity:"13"},{id:2,imgUrl:"https://chenjiedingzhi.oss-cn-shanghai.aliyuncs.com/upload/ginger_image/1/2023_04_21_14_16_07.09604.jpg",isChecked:!1,title:"修身西服2023春季新款",artNo:"xsxfcjxk",specifications:"黄色 41",purchasePrice:"11.22",inventory:[{brand:"北京店",num:10},{brand:"上海店",num:5}],PurchaseQuantity:"53"},{id:3,imgUrl:"https://chenjiedingzhi.oss-cn-shanghai.aliyuncs.com/upload/ginger_image/1/2023_04_21_14_16_07.09604.jpg",isChecked:!1,title:"修身西服2023春季新款",artNo:"xsxfcjxk",specifications:"黄色 41",purchasePrice:"11.22",inventory:[{brand:"北京店",num:10}],PurchaseQuantity:"11"},{id:4,imgUrl:"https://chenjiedingzhi.oss-cn-shanghai.aliyuncs.com/upload/ginger_image/1/2023_04_21_14_16_07.09604.jpg",isChecked:!1,title:"修身西服2023春季新款",artNo:"xsxfcjxk",specifications:"黄色 41",purchasePrice:"11.22",inventory:[{brand:"北京店",num:10}],PurchaseQuantity:"32"},{id:5,imgUrl:"https://chenjiedingzhi.oss-cn-shanghai.aliyuncs.com/upload/ginger_image/1/2023_04_21_14_16_07.09604.jpg",isChecked:!1,title:"修身西服2023春季新款",artNo:"xsxfcjxk",specifications:"黄色 41",purchasePrice:"11.22",inventory:[{brand:"北京店",num:10}],PurchaseQuantity:"56"},{id:6,imgUrl:"https://chenjiedingzhi.oss-cn-shanghai.aliyuncs.com/upload/ginger_image/1/2023_04_21_14_16_07.09604.jpg",isChecked:!1,title:"修身西服2023春季新款",artNo:"xsxfcjxk",specifications:"黄色 41",purchasePrice:"11.22",inventory:[{brand:"北京店",num:10}],PurchaseQuantity:"140"}],e.clothingDialog.loading=!1}),500)},submitSelClothingData:function(){var e=this,t=this.clothingDialog.dataList.filter((function(e){return e.isChecked}));t.forEach((function(t){e.TransferForm.clothingDataList.some((function(e){return e.id==t.id}))||e.TransferForm.clothingDataList.push(t)})),this.clothingDialog.visible=!1},closeClothingDialog:function(){},openSetNumberDialog:function(e){this.setNumberDialog.visible=!0,this.setNumberDialog.setNumberForm.id=e.id,this.setNumberDialog.setNumberForm.name=e.title,this.setNumberDialog.setNumberForm.color=e.specifications,this.setNumberDialog.setNumberForm.inventory=e.inventory.map((function(e){return e.num})).reduce((function(e,t){return e+t}),0),this.setNumberDialog.setNumberForm.number=e.PurchaseQuantity},handleSetNumber:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.submitLoading=!0,setTimeout((function(){var e=t.setNumberDialog.setNumberForm.id;t.TransferForm.clothingDataList.find((function(t){return t.id==e})).PurchaseQuantity=t.setNumberDialog.setNumberForm.number,t.submitLoading=!1,t.setNumberDialog.visible=!1,t.$message.success("调整成功")}),500)}))},closeSetNumberDialog:function(){this.$refs["setNumberRef"].resetFields()},delSelColthing:function(e,t){this.TransferForm.clothingDataList.splice(t,1)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.submitLoading=!0,setTimeout((function(){t.$message.success("操作成功!"),t.submitLoading=!1,t.$store.dispatch("tagsView/delView",t.$route),t.$router.push({path:"/FinishedProductManagement/TransferOrder"})}),500)}))},resetForm:function(e){this.$refs[e].resetFields()}}}),a=o,s=(i("0b75"),i("2877")),l=Object(s["a"])(a,r,n,!1,null,"3109414c",null);t["default"]=l.exports},d58f:function(e,t,i){var r=i("1c0b"),n=i("7b0b"),o=i("44ad"),a=i("50c4"),s=function(e){return function(t,i,s,l){r(i);var c=n(t),u=o(c),m=a(c.length),g=e?m-1:0,h=e?-1:1;if(s<2)while(1){if(g in u){l=u[g],g+=h;break}if(g+=h,e?g<0:m<=g)throw TypeError("Reduce of empty array with no initial value")}for(;e?g>=0:m>g;g+=h)g in u&&(l=i(l,u[g],g,c));return l}};e.exports={left:s(!1),right:s(!0)}}}]);